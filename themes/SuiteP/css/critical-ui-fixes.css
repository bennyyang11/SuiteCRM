/**
 * CRITICAL UI/UX Bug Fixes for SuiteCRM
 * Addresses: Non-responsive buttons, dropdown visibility, sidebar issues
 */

/* ====================================
   1. FIX NON-RESPONSIVE BUTTONS
   ==================================== */

/* Ensure all buttons are clickable and functional */
button,
.button,
.btn,
input[type="button"],
input[type="submit"],
input[type="reset"],
.actionmenulinks a,
.quick-action-btn {
    pointer-events: auto !important;
    cursor: pointer !important;
    position: relative !important;
    z-index: 10 !important;
    display: inline-block !important;
}

/* Remove any overlay blocking button clicks */
button::before,
.btn::before,
.button::before {
    content: none !important;
    display: none !important;
}

/* Ensure button text is visible and clickable */
button *,
.btn *,
.button * {
    pointer-events: none !important;
    color: inherit !important;
}

/* Fix specific SuiteCRM button styles */
.actions-header .actions-button,
.detail-view-actions .btn,
.listview-actions .btn {
    background: #667eea !important;
    color: white !important;
    border: none !important;
    padding: 8px 16px !important;
    border-radius: 4px !important;
    cursor: pointer !important;
    pointer-events: auto !important;
}

.actions-header .actions-button:hover,
.detail-view-actions .btn:hover,
.listview-actions .btn:hover {
    background: #5a67d8 !important;
    transform: translateY(-1px) !important;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
}

/* ====================================
   2. FIX DROPDOWN VISIBILITY FINAL
   ==================================== */

/* NUCLEAR DROPDOWN FIX - Override everything */
.dropdown-menu,
.dropdown-menu *,
.topnav .dropdown-menu,
.topnav .dropdown-menu *,
.navbar-nav .topnav .dropdown-menu,
.navbar-nav .topnav .dropdown-menu *,
ul.dropdown-menu,
ul.dropdown-menu *,
div.dropdown-menu,
div.dropdown-menu * {
    background: white !important;
    color: #2d3748 !important;
    border: 1px solid #e2e8f0 !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15) !important;
}

.dropdown-menu li,
.dropdown-menu li *,
.dropdown-menu a,
.dropdown-menu span,
.dropdown-menu div {
    color: #2d3748 !important;
    background: white !important;
    text-decoration: none !important;
}

.dropdown-menu li a:hover,
.dropdown-menu li:hover,
.dropdown-menu li:hover * {
    background: #f7fafc !important;
    color: #2d3748 !important;
}

/* Specific SuiteCRM dropdown classes */
.actionmenulinks,
.actionmenulinks *,
.recentlinks,
.recentlinks *,
.favoritelinks,
.favoritelinks * {
    color: #2d3748 !important;
    background: white !important;
}

/* Override any inline styles */
[style*="color: white"],
[style*="color:#ffffff"],
[style*="color:#fff"] {
    color: #2d3748 !important;
}

/* ====================================
   3. FIX SIDEBAR TOGGLE FUNCTIONALITY
   ==================================== */

/* Ensure toggle button is always visible and functional */
#buttontoggle,
.buttontoggle {
    display: block !important;
    position: fixed !important;
    top: 60px !important;
    left: 10px !important;
    z-index: 9999 !important;
    width: 40px !important;
    height: 40px !important;
    background: rgba(102, 126, 234, 0.9) !important;
    border: none !important;
    border-radius: 50% !important;
    cursor: pointer !important;
    pointer-events: auto !important;
    transition: all 0.3s ease !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2) !important;
}

#buttontoggle:hover,
.buttontoggle:hover {
    background: rgba(102, 126, 234, 1) !important;
    transform: scale(1.1) !important;
}

/* Hamburger icon for toggle button */
#buttontoggle span,
.buttontoggle span {
    display: block !important;
    width: 20px !important;
    height: 2px !important;
    background: white !important;
    margin: 4px auto !important;
    transition: 0.3s !important;
    border-radius: 2px !important;
}

#buttontoggle span:before,
#buttontoggle span:after,
.buttontoggle span:before,
.buttontoggle span:after {
    content: '' !important;
    display: block !important;
    width: 20px !important;
    height: 2px !important;
    background: white !important;
    transition: 0.3s !important;
    border-radius: 2px !important;
    transform-origin: center !important;
}

#buttontoggle span:before,
.buttontoggle span:before {
    transform: translateY(-6px) !important;
}

#buttontoggle span:after,
.buttontoggle span:after {
    transform: translateY(4px) !important;
}

/* When sidebar is open, show close icon */
.sidebar-open #buttontoggle span,
.sidebar-open .buttontoggle span {
    background: transparent !important;
}

.sidebar-open #buttontoggle span:before,
.sidebar-open .buttontoggle span:before {
    transform: rotate(45deg) !important;
}

.sidebar-open #buttontoggle span:after,
.sidebar-open .buttontoggle span:after {
    transform: rotate(-45deg) translateY(-2px) !important;
}

/* ====================================
   4. FIX SIDEBAR CONTENT VISIBILITY
   ==================================== */

/* Force sidebar background to be visible */
.sidebar,
#sidebar_container,
.sidebar_container {
    background: white !important;
    border-right: 1px solid #e2e8f0 !important;
    box-shadow: 2px 0 8px rgba(0,0,0,0.1) !important;
}

/* Fix ALL sidebar text visibility */
.sidebar *,
.sidebar h2,
.sidebar h3,
.sidebar span,
.sidebar a,
.sidebar li,
.sidebar div,
.recent_h3,
.actionMenuSidebar *,
.recentlyViewedSidebar *,
.favoritesSidebar *,
.actionmenulinks *,
.recentlinks *,
.recently_viewed_link_container_sidebar *,
.sidebar-section *,
.sidebar-section-content *,
.quick-actions *,
.recent-item *,
.favorite-item *,
.stats-grid *,
.stat-item *,
.sidebar-empty-state * {
    color: #2d3748 !important;
    background: transparent !important;
}

/* Fix specific sidebar headers */
.recent_h3,
.sidebar h2,
.sidebar h3 {
    color: #2d3748 !important;
    font-weight: bold !important;
    font-size: 14px !important;
    margin: 15px 0 10px 20px !important;
    text-transform: uppercase !important;
    letter-spacing: 1px !important;
    border-bottom: 1px solid #e2e8f0 !important;
    padding-bottom: 8px !important;
}

/* Fix sidebar links */
.sidebar a,
.actionmenulinks a,
.recentlinks a,
.recent-links-detail,
.favorite-links-detail {
    color: #2d3748 !important;
    text-decoration: none !important;
    display: block !important;
    padding: 8px 20px !important;
    border-bottom: 1px solid #f7fafc !important;
    transition: all 0.2s ease !important;
}

.sidebar a:hover,
.actionmenulinks a:hover,
.recentlinks a:hover,
.recent-links-detail:hover,
.favorite-links-detail:hover {
    background: #f7fafc !important;
    color: #667eea !important;
    padding-left: 25px !important;
}

/* Fix stats section */
.stat-item {
    background: white !important;
    border: 1px solid #e2e8f0 !important;
    border-radius: 4px !important;
    padding: 12px !important;
    margin: 8px !important;
    text-align: center !important;
}

.stat-number {
    color: #667eea !important;
    font-weight: bold !important;
    font-size: 18px !important;
    display: block !important;
}

.stat-label {
    color: #6c757d !important;
    font-size: 10px !important;
    text-transform: uppercase !important;
    letter-spacing: 0.5px !important;
    margin-top: 4px !important;
}

/* Fix empty states */
.sidebar-empty-state {
    color: #6c757d !important;
    text-align: center !important;
    padding: 20px !important;
    font-style: italic !important;
    font-size: 12px !important;
}

/* ====================================
   5. ENHANCED SIDEBAR HEADER
   ==================================== */

.sidebar-header {
    background: linear-gradient(135deg, #667eea, #764ba2) !important;
    color: white !important;
    padding: 20px !important;
    border-bottom: 1px solid #e2e8f0 !important;
}

.sidebar-header h4 {
    color: white !important;
    font-size: 18px !important;
    font-weight: bold !important;
    margin: 0 0 8px 0 !important;
}

.sidebar-header .user-info {
    color: white !important;
    font-size: 14px !important;
    line-height: 1.4 !important;
}

.sidebar-header .user-info small {
    color: rgba(255, 255, 255, 0.9) !important;
    font-size: 12px !important;
    display: block !important;
    margin-top: 2px !important;
}

/* ====================================
   6. GENERAL Z-INDEX FIXES
   ==================================== */

/* Ensure proper stacking order */
.sidebar {
    z-index: 100 !important;
}

.dropdown-menu {
    z-index: 1050 !important;
}

.navbar {
    z-index: 1030 !important;
}

#buttontoggle,
.buttontoggle {
    z-index: 9999 !important;
}

/* ====================================
   7. RESPONSIVE BEHAVIOR
   ==================================== */

@media (max-width: 768px) {
    .sidebar {
        width: 280px !important;
        transform: translateX(-100%) !important;
        transition: transform 0.3s ease !important;
    }
    
    .sidebar.show {
        transform: translateX(0) !important;
    }
    
    #buttontoggle,
    .buttontoggle {
        display: block !important;
    }
}
